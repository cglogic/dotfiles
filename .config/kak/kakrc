set-option global makecmd 'make'
set-option global grepcmd 'ag --column'
set-option global clang_options '-std=c++14'
set-option global ui_options 'ncurses_status_on_top=true' 'ncurses_assistant=none' 'ncurses_change_colors=true' 'ncurses_enable_mouse=false' 'ncurses_set_title=true'
#set-option global autoinfo normal|command|onkey

set-option global indentwidth 0

colorscheme tomorrow-night

add-highlighter global/ number-lines -hlcursor -separator ' '
add-highlighter global/ show-matching
#add-highlighter global/ show-whitespaces
add-highlighter global/ dynregex '%reg{/}' 0:+u
add-highlighter global/ wrap -word -indent

set-option global autocomplete prompt
hook global InsertBegin .* %{ map window insert <a-space> <c-o> }
hook global InsertEnd .* %{ unmap window insert <a-space> <c-o> }

hook global InsertCompletionShow .* %{ map window insert <tab> <c-n>; map window insert <s-tab> <c-p> }
hook global InsertCompletionHide .* %{ unmap window insert <tab> <c-n>; unmap window insert <s-tab> <c-p>; execute-keys <c-o> }

# hook global WinSetOption filetype=(c|cpp) %{
# 	clang-enable-autocomplete
# 	clang-enable-diagnostics
# 	alias window lint clang-parse
# 	alias window lint-next-error clang-diagnostics-next
# }

map global normal '#' :comment-line<ret>

hook global WinSetOption filetype=(c|cpp) %{
	set-option window formatcmd '$CF -style=file'
}

# evaluate-commands %sh{
# 	for filetype in c cpp; do
# 		printf "%s\n" "add-highlighter shared/$filetype/code/operator regex (?!['\"])(?!\d\.)(?!\.\d)(\W) 0:operator"
# 	done
# }

source "%val{config}/plugins/plug.kak/rc/plug.kak"

plug "andreyorst/fzf.kak" "branch: fzy" %{
	set-option global fzf_implementation 'fzy'
	map global normal ';' ': fzf-mode<ret>'
	set-option global fzf_file_command 'ag --nocolor -l -g .'
	set-option global fzf_preview false
}

# plug "andreyorst/powerline.kak" %{
# 	hook -once global WinCreate .* %{
# 		powerline-theme tomorrow-night
# 		powerline-separator none
# 		powerline-format line_column position git bufname filetype mode_info
# 		powerline-toggle position off
# 		powerline-toggle git off
# 	}
# }

#eval %sh{kak-lsp --kakoune -s $kak_session}
